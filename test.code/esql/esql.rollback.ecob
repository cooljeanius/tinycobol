 IDENTIFICATION DIVISION.
 PROGRAM-ID. ESQL.
 ENVIRONMENT DIVISION.
 CONFIGURATION SECTION.
* INPUT-OUTPUT SECTION.
 DATA DIVISION.
 FILE SECTION.

 WORKING-STORAGE SECTION.
    EXEC SQL
	INCLUDE SQLCA
    END-EXEC 
    77 COUNTER	PIC 	S9.
    01 WHERE-ERROR	PIC	X(72).
    01 gds__trans	REDEFINES ISC_TRANS PIC S9(9) USAGE COMP.

    EXEC SQL BEGIN DECLARE SECTION END-EXEC
    01 TRANS    PIC     S9(9) USAGE COMP VALUE 0.
    EXEC SQL END   DECLARE SECTION END-EXEC
 
PROCEDURE DIVISION.
 MAIN.
  	DISPLAY " ".
  	DISPLAY " ".
  	DISPLAY " DEMO ESQL PROGRAM ".
		EXEC SQL
			CONNECT TO 'demo.gdb'
		END-EXEC
		DISPLAY "DATABASE OPEN RETURNS CODE: " SQLCODE.
		EXEC SQL
			SET TRANSACTION NAME TRANS
		END-EXEC
		EXEC SQL
			INSERT TRANSACTION TRANS INTO FRIEND VALUES(
					'MyFirstname',
					'MyLastName',
					'MyRollback',		
					'VA',
					20)
		END-EXEC.
		DISPLAY "INSERT INTO TABLE RETURNS CODE: " SQLCODE.
		EXEC SQL
			ROLLBACK TRANSACTION TRANS
		END-EXEC
		DISPLAY "ROLLBACK TRANSACTION RETURNS CODE: " SQLCODE.
		EXEC SQL
			DISCONNECT ALL
		END-EXEC.
		DISPLAY "DATABASE CLOSE RETURNS CODE: " SQLCODE.
  STOP RUN.

